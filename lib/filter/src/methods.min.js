"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_conf=_interopRequireDefault(require("../../conf")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default={filter:function(e,t){var i=this.getColumnByField(e),l=i.filters;if(t){var r=t(l);_xeUtils.default.isArray(r)&&(i.filters=_tools.UtilTools.getFilters(r))}return Promise.resolve(l)},triggerFilterEvent:function(e,t,i){var l=this.$refs,r=this.filterStore;if(r.column===t&&r.visible)r.visible=!1;else{var o=e.target,s=l.filterWrapper,n=_tools.DomTools.getAbsolutePos(o),a=n.top,c=n.left;Object.assign(r,{args:i,multiple:t.filterMultiple,options:t.filters,column:t,style:{zIndex:_conf.default.tooltip.zIndex,top:"".concat(a+o.clientHeight+6,"px"),left:"".concat(c,"px")},visible:!0}),r.isAllSelected=r.options.every(function(e){return e.checked}),r.isIndeterminate=!r.isAllSelected&&r.options.some(function(e){return e.checked}),this.$nextTick(function(){var e=s.$el;r.style.top="".concat(a+o.clientHeight+6,"px"),r.style.left="".concat(c-e.clientWidth/2+10,"px")})}},confirmFilterEvent:function(e){var t=this.visibleColumn,i=this.filterStore,l=this.remoteFilter,r=this.scrollXLoad,o=this.scrollYLoad,s=i.column,n=s.property,a=[],c=[];s.filters.forEach(function(e){e.checked&&(a.push(e.value),c.push(e.data))}),i.visible=!1,l||this.handleTableData(!0);var u=[];t.filter(function(e){var t=e.property,i=e.filters,l=[],r=[];i&&i.length&&(i.forEach(function(e){e.checked&&(l.push(e.value),r.push(e.data))}),u.push({column:e,property:t,field:t,prop:t,values:l,datas:r}))}),_tools.UtilTools.emitEvent(this,"filter-change",[{column:s,property:n,field:n,prop:n,values:a,datas:c,filters:u,$table:this}]),this.updateFooter(),(r||o)&&(this.clearScroll(),o&&this.updateScrollYSpace()),this.closeFilter(),this.$nextTick(this.recalculate)},resetFilterEvent:function(e){this.filterStore.options.forEach(function(e){e.checked=!1,e.data=e._data}),this.confirmFilterEvent(e)},clearFilter:function(e){var t=arguments.length?this.getColumnByField(e):null,i=this.filterStore,l=function(e){var t=e.filters;t&&t.length&&t.forEach(function(e){e.checked=!1,e.data=e._data})};return t?l(t):this.visibleColumn.forEach(l),t&&t===i.column||Object.assign(i,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),this.updateData()}};exports.default=_default;