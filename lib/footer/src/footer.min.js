"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var _default={name:"STableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},mounted:function(){var e=this.$parent,l=this.$el,t=this.$refs,o=this.fixedType,r=e.elemStore,n="".concat(o||"main","-footer-");r["".concat(n,"wrapper")]=l,r["".concat(n,"table")]=t.table,r["".concat(n,"colgroup")]=t.colgroup,r["".concat(n,"list")]=t.tfoot,r["".concat(n,"x-space")]=t.xSpace},render:function($){var e=this._e,h=this.$parent,g=this.fixedType,l=this.fixedColumn,t=this.tableColumn,o=this.footerData,_=h.$listeners,r=h.footerRowClassName,y=h.footerCellClassName,T=h.footerAlign,w=h.align,n=h.scrollXLoad,I=h.columnKey,C=h.showOverflow,S=h.overflowX,U=h.getColumnIndex;return g&&C?t=l:n&&g&&(t=l),$("div",{class:["s-table--footer-wrapper",g?"fixed-".concat(g,"--wrapper"):"body--wrapper"],on:{scroll:this.scrollEvent}},[g?e():$("div",{class:"s-body--x-space",ref:"xSpace"}),$("table",{class:"s-table--footer",attrs:{cellspacing:0,cellpadding:0,border:0},ref:"table"},[$("colgroup",{ref:"colgroup"},t.map(function(e,l){return $("col",{attrs:{name:e.id},key:l})}).concat([$("col",{name:"col--gutter"})])),$("tfoot",{ref:"tfoot"},o.map(function(b,v){return $("tr",{class:["s-footer--row",r?_xeUtils.default.isFunction(r)?r({$table:h,$rowIndex:v,fixed:g}):r:""]},t.map(function(l,t){var e,o=l.showOverflow,r=l.footerAlign,n=l.align,i=l.children&&l.children.length,c=g?l.fixed!==g&&!i:l.fixed&&S,a=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?C:o,s=r||n||T||w,d="title"===a,f="tooltip"===a,u=!0===a||"complete"===a,p=u||d||f||"ellipsis"===a,m={},x=U(l);return(d||f||u)&&(m.mouseover=function(e){d?_tools.DomTools.updateCellTitle(e):u?h.triggerCompleteEvent(e,{$table:h,$rowIndex:v,column:l,columnIndex:x,$columnIndex:t,locationType:"footer",fixed:g}):f&&h.triggerFooterTooltipEvent(e,{$table:h,$rowIndex:v,column:l,columnIndex:x,$columnIndex:t,fixed:g})}),(f||u)&&(m.mouseleave=function(e){u?h.closeComplete(event):f&&h.clostTooltip()}),_["header-cell-click"]&&(m.click=function(e){_tools.UtilTools.emitEvent(h,"header-cell-click",[{$table:h,$rowIndex:v,column:l,columnIndex:x,$columnIndex:t,fixed:g,cell:e.currentTarget},e])}),_["header-cell-dblclick"]&&(m.dblclick=function(e){_tools.UtilTools.emitEvent(h,"header-cell-dblclick",[{$table:h,$rowIndex:v,column:l,columnIndex:x,$columnIndex:t,fixed:g,cell:e.currentTarget},e])}),$("td",{class:["s-footer--column",l.id,(e={},_defineProperty(e,"col--".concat(s),s),_defineProperty(e,"fixed--hidden",c),_defineProperty(e,"col--ellipsis",p),_defineProperty(e,"filter--active",l.filters.some(function(e){return e.checked})),e),y?_xeUtils.default.isFunction(y)?y({$table:h,$rowIndex:v,column:l,columnIndex:x,$columnIndex:t,fixed:g}):y:""],attrs:{"data-colid":l.id},on:m,key:I?l.id:x},[$("div",{class:"s-cell"},_tools.UtilTools.formatText(b[h.tableColumn.indexOf(l)],1))])}).concat([$("td",{class:"col--gutter"})]))}))])])},methods:{scrollEvent:function(e){var l=this.$parent,t=this.fixedType,o=l.$refs,r=l.scrollXLoad,n=l.triggerScrollXEvent,i=l.lastScrollLeft,c=o.tableHeader,a=c?c.$el:null,s=o.tableBody.$el,d=o.tableFooter.$el.scrollLeft,f=d!==i;l.lastScrollLeft=d,l.lastScrollTime=Date.now(),a&&(a.scrollLeft=d),s&&(s.scrollLeft=d),r&&f&&n(e),_tools.UtilTools.emitEvent(l,"scroll",[{type:"footer",fixed:t,scrollTop:s.scrollTop,scrollLeft:d,isX:f,isY:!1,$table:l},e])}}};exports.default=_default;